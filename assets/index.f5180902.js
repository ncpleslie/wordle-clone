import{j as l,m as T,o as g,r as p,C as U,a as x,R as _,b as E}from"./vendor.aed7bed9.js";const S=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}};S();const $="_app_666x2_1",G="_game_666x2_4";var b={app:$,game:G};const n=l.exports.jsx,f=l.exports.jsxs,m=l.exports.Fragment,I=r=>n("div",{className:`character-box 
        ${r.usedLocationIncorrect&&"incorrect-location"} 
          ${r.usedLocationCorrect&&"correct-location"} 
          ${r.notUsed&&"not-used"}
          ${r.invalid&&"invalid"}
          `,children:n("p",{className:"character-box__text",children:r.character})});var h;(function(r){r.Enter="ENTER",r.Backspace="<"})(h||(h={}));class L{constructor(t){this.character=t}character;usedLocationCorrect=!1;usedLocationIncorrect=!1;notUsed=!1;invalid=!1}class O{constructor(t,e,o){this.word=t.toUpperCase(),this.tries=e,this.lang=o,console.log("Word is: ",t)}word;tries;lang}class d{error;won;static forNotAWord(){return d.createSubmitResponse("Not a word!",!0)}static forLost(t){return d.createSubmitResponse(t,!0)}static forWon(){return d.createSubmitResponse("You win!",!1)}static createSubmitResponse(t,e){const o=new d;return e?o.error=t:o.won="You win!",o}}const R="modulepreload",k={},N="/wordle-clone/",y=function(t,e){return!e||e.length===0?t():Promise.all(e.map(o=>{if(o=`${N}${o}`,o in k)return;k[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":R,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((K,C)=>{c.addEventListener("load",K),c.addEventListener("error",C)})})).then(()=>t())};class W{constructor(t,e,o){this.wordLength=t,this.tries=e,this.lang=o}wordLength;tries;lang}class A{constructor(t,e,o,s=!1){this.character=t,this.order=e,this.row=o,this.special=s,this.usedLocationKnown=!1,this.usedLocationUnknown=!1,this.notUsed=!1}character;order;row;special;usedLocationKnown;usedLocationUnknown;notUsed}class u{static async generateKeyboard(t){return(await u.getKeyboard(t))?.reduce((o,s)=>(o[s.character.toUpperCase()]=s,o),{})}static async getConfig(){const t=await y(()=>import("./config.639d2aae.js"),[]);return new W(t.wordLength,t.tries,t.lang)}static async getKeyboard(t){return(await y(()=>import("./keyboard.f1bf6d36.js"),[])).default[t].map(s=>new A(s.character,s.order,s.row,s.special))}static async getRandomWord(t,e){const o=await u.getDictionary(e),s=o[t].length;return o[t][Math.floor(Math.random()*(s-0))]}static async isWord(t,e){return(await u.getDictionary(e))[t.length.toString()].includes(t.toLowerCase())}static async getDictionary(t){return(await y(()=>import("./dictionary.4017dd85.js"),[])).default[t]}}class w{row=0;constructor(t,e){this.options=t,this.guesses=e}guesses;options;addGuess(t){this.guesses[this.row].length>=this.options.word.length||this.guesses[this.row].push(new L(t))}async submit(){const t=this.options.word.length,e=this.guesses[this.row].length;if(e===0||e%t!=0||this.row>=this.options.tries)return;const o=this.guesses[this.row].reduce((s,a)=>`${s}${a.character}`,"");if(!await u.isWord(o,this.options.lang)){for(let s=0;s<e;s++)this.guesses[this.row][s].invalid=!0;return d.forNotAWord()}for(let s=0;s<e;s++){const a=this.guesses[this.row][s].character,c=this.options.word.split("");if(a===c[s]){this.guesses[this.row][s].usedLocationCorrect=!0;continue}if(c.includes(a)){this.guesses[this.row][s].usedLocationIncorrect=!0;continue}this.guesses[this.row][s].notUsed=!0}if(o===this.options.word)return d.forWon();if(this.row++,this.row>=this.options.tries)return d.forLost(this.options.word)}undo(){this.guesses[this.row]?.pop()}static async createGameService(){const t=await u.getConfig(),e=await u.getRandomWord(t.wordLength,t.lang),o=new O(e,t.tries,t.lang),s=[...Array(o.tries)].map(()=>Array(0));return new w(o,s)}}class j{timer;constructor(t,e){T(this),this.guesses=[],this.game=t,this.keyboard=e}game;guesses;keyboard;showToast=!1;toastMessage="";toastTimeoutInMs=2500;getGuessByIndex(t){return this.guesses.length===0||this.guesses.length<=t?new L(""):this.guesses[t]}getTotalTries(){return this.game.options.tries}getWordLength(){return this.game.options.word.length}async onKeyClicked(t){if(t===h.Enter){const e=await this.game.submit();e?.error&&this.displayToast(e.error),e?.won&&this.displayToast(e.won),this.updateGuessesState(),this.guesses.forEach(o=>{o.usedLocationCorrect&&this.setKeyLocationKnown(o.character),o.usedLocationIncorrect&&this.setKeyLocationUnknown(o.character),o.notUsed&&this.setKeyNotUsed(o.character)}),this.updateKeyboardState();return}if(t===h.Backspace){this.game.undo(),this.updateGuessesState();return}this.game.addGuess(t),this.updateGuessesState()}setKeyLocationKnown(t){!this.keyboard||(this.keyboard[t].usedLocationKnown=!0)}setKeyLocationUnknown(t){!this.keyboard||(this.keyboard[t].usedLocationUnknown=!0)}setKeyNotUsed(t){!this.keyboard||(this.keyboard[t].notUsed=!0)}displayToast(t,e=2500){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this.showToast=!0,this.toastMessage=t,this.toastTimeoutInMs=e,this.showToast&&(this.timer=setTimeout(()=>this.hideToast(),e))}hideToast(){this.showToast=!1}updateGuessesState(){this.guesses=this.game.guesses.flat()}updateKeyboardState(){this.keyboard={...this.keyboard}}}const v=await w.createGameService(),D=await u.generateKeyboard(v.options.lang),i=new j(v,D),M=g(()=>n("div",{className:`gameboard grid-cols-${i.getWordLength()}`,children:[...Array(i.getWordLength()*i.getTotalTries())].map((r,t)=>{const e=i.getGuessByIndex(t);return n(I,{character:e.character,usedLocationCorrect:e.usedLocationCorrect,usedLocationIncorrect:e.usedLocationIncorrect,notUsed:e.notUsed,invalid:e.invalid},t)})}));const P=r=>{const t=()=>{r.onKeyClicked(r.character)};return n("button",{className:`key ${r.usedLocationUnknown&&"used-and-unknown"} ${r.usedLocationKnown&&"used-and-known"} ${r.notUsed&&"not-used"} ${r.special&&"special"}`,onClick:t,children:n("p",{className:"key__text",children:r.character.toUpperCase()})})};const B=g(()=>{const r=async e=>{await i.onKeyClicked(e)};let t=0;return i.keyboard?n("div",{children:n("div",{className:"keyboard",children:Object.keys(i.keyboard).map(e=>{const o=n(P,{character:e,usedLocationKnown:i.keyboard[e].usedLocationKnown,usedLocationUnknown:i.keyboard[e].usedLocationUnknown,onKeyClicked:r,notUsed:i.keyboard[e].notUsed,special:i.keyboard[e].special},e);return i.keyboard[e].row!==t?(t=i.keyboard[e].row,f(p.exports.Fragment,{children:[n("div",{className:"keyboard__break"}),o]},e)):o})})}):n(m,{})});class F{static toastElement="toast-root"}const V=g(()=>{const r=p.exports.useRef(),t=n(U,{in:i.showToast,timeout:i.toastTimeoutInMs,classNames:"slide",mountOnEnter:!0,unmountOnExit:!0,nodeRef:r,children:n("div",{ref:r,className:"toast",children:n("div",{className:"toast-content",children:n("p",{children:i.toastMessage})})})});return n(m,{children:x.exports.createPortal(t,document.getElementById(F.toastElement))})}),q=()=>f(m,{children:[n("div",{className:b.app,children:f("div",{className:b.game,children:[n(M,{}),n(B,{})]})}),n(V,{})]});_.render(n(E.StrictMode,{children:n(q,{})}),document.getElementById("root"));
