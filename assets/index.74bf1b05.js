import{j as L,r as i,c as k,m as _,o as m,u as S,L as R,C as O,a as C,b as A,R as E,d as N,e as $,B as j}from"./vendor.3e367ae2.js";const B=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}};B();const r=L.exports.jsx,d=L.exports.jsxs,u=L.exports.Fragment,D=i.exports.memo(t=>{const e=k("character-box",{"incorrect-location":t.usedLocationIncorrect,"correct-location":t.usedLocationCorrect,"not-used":t.notUsed,invalid:t.invalid});return r("div",{className:e,children:r("p",{className:"character-box__text",children:t.character})})}),M=t=>d("div",{className:"max-w-sm rounded overflow-hidden shadow-lg px-6 py-4 text-center bg-red-100 border border-red-400",children:[r("h1",{className:"font-bold text-xl mb-2",children:"An error has occurred while loading this application"}),t.message&&d("p",{children:["Reason: ",t.message]})]});class P{constructor(e,o,s){this.word=e.toUpperCase(),this.tries=o,this.lang=s,console.log("Word is: ",e)}word;tries;lang}class K{constructor(e){this.character=e}character;usedLocationCorrect=!1;usedLocationIncorrect=!1;notUsed=!1;invalid=!1}class h{error;won;static forNotAWord(){return h.createSubmitResponse("Not a word!",!0)}static forLost(e){return h.createSubmitResponse(e,!0)}static forWon(){return h.createSubmitResponse("You win!",!1)}static createSubmitResponse(e,o){const s=new h;return o?s.error=e:s.won="You win!",s}}const V="modulepreload",T={},q="/wordle-clone/",v=function(e,o){return!o||o.length===0?e():Promise.all(o.map(s=>{if(s=`${q}${s}`,s in T)return;T[s]=!0;const n=s.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":V,n||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),n)return new Promise((G,W)=>{c.addEventListener("load",G),c.addEventListener("error",W)})})).then(()=>e())};class w{constructor(e,o,s,n){this.wordLength=e,this.tries=o,this.lang=s,this.supportedLangs=n}wordLength;tries;supportedLangs;lang}class F{constructor(e,o,s,n=!1){this.character=e,this.order=o,this.row=s,this.special=n,this.usedLocationKnown=!1,this.usedLocationUnknown=!1,this.notUsed=!1}character;order;row;special;usedLocationKnown;usedLocationUnknown;notUsed}class p{static loadingElement="loading-root";static modalElement="modal-root";static toastElement="toast-root"}class z{constructor(e,o,s,n,a,c){this.wordLengths=e,this.tries=o,this.languages=s,this.currentWordLength=n,this.currentTries=a,this.currentLang=c}languages;currentLang;currentWordLength;wordLengths;tries;currentTries}class l{static async generateKeyboard(e){return(await l.getKeyboard(e))?.reduce((s,n)=>(s[n.character.toUpperCase()]=n,s),{})}static async getConfig(){const e=await v(()=>import("./config.81b6a2f7.js"),[]);return new w(e.wordLength,e.tries,e.supportedLangs[0],e.supportedLangs)}static async getKeyboard(e){return(await v(()=>import("./keyboard.f1bf6d36.js"),[])).default[e].map(n=>new F(n.character,n.order,n.row,n.special))}static async getRandomWord(e,o){const s=await l.getDictionary(o),n=s[e].length,a=s[e][Math.floor(Math.random()*(n-0))];return/^[a-z]+$/i.test(a)?a:l.getRandomWord(e,o)}static async getSettingsConfig(){const e=await l.getConfig();if(!e.lang)throw new Error("Unable to determine language");const o=await l.getDictionary(e.lang),s=["1","2","3","4","5","6","7","8","9","10"],n=e.supportedLangs?e.supportedLangs:[e.lang];return new z(Object.keys(o),s,n)}static async isWord(e,o){return(await l.getDictionary(o))[e.length.toString()].includes(e.toLowerCase())}static removeLoadingIndicator(){document.getElementById(p.loadingElement)?.remove()}static async getDictionary(e){return(await v(()=>import("./dictionary.4017dd85.js"),[])).default[e]}}class y{row=0;constructor(e,o){this.options=e,this.guesses=o}guesses;options;addGuess(e){this.guesses[this.row].length>=this.options.word.length||this.guesses[this.row].push(new K(e))}async submit(){const e=this.options.word.length,o=this.guesses[this.row].length;if(o===0||o%e!=0||this.row>=this.options.tries)return;const s=this.guesses[this.row].reduce((n,a)=>`${n}${a.character}`,"");if(!await l.isWord(s,this.options.lang)){for(let n=0;n<o;n++)this.guesses[this.row][n].invalid=!0;return h.forNotAWord()}for(let n=0;n<o;n++){const a=this.guesses[this.row][n].character,c=this.options.word.split("");if(a===c[n]){this.guesses[this.row][n].usedLocationCorrect=!0;continue}if(c.includes(a)){this.guesses[this.row][n].usedLocationIncorrect=!0;continue}this.guesses[this.row][n].notUsed=!0}if(s===this.options.word)return h.forWon();if(this.row++,this.row>=this.options.tries)return h.forLost(this.options.word)}undo(){this.guesses[this.row]?.pop()}static async createGameService(e){let o=e;e||(o=await l.getConfig());const s=await l.getRandomWord(o?.wordLength||5,o?.lang||"en-US"),n=new P(s,o?.tries||6,o?.lang||"en-US"),a=[...Array(n.tries)].map(()=>Array(0));return new y(n,a)}}var b;(function(t){t.Enter="ENTER",t.Backspace="<"})(b||(b={}));class Y{timer;constructor(e,o){_(this),this.guesses=[],this.game=e,this.keyboard=o}game;guesses;keyboard;showToast=!1;toastMessage="";toastTimeoutInMs=2500;getGuessByIndex(e){return this.guesses.length===0||this.guesses.length<=e?new K(""):this.guesses[e]}getTotalTries(){return this.game.options.tries}getWordLength(){return this.game.options.word.length}async onKeyClicked(e){if(e===b.Enter){const o=await this.game.submit();o?.error&&this.displayToast(o.error),o?.won&&this.displayToast(o.won),this.updateGuessesState(),this.guesses.forEach(s=>{s.usedLocationCorrect&&this.setKeyLocationKnown(s.character),s.usedLocationIncorrect&&this.setKeyLocationUnknown(s.character),s.notUsed&&this.setKeyNotUsed(s.character)}),this.updateKeyboardState();return}if(e===b.Backspace){this.game.undo(),this.updateGuessesState();return}this.game.addGuess(e),this.updateGuessesState()}async getSettings(){const e=await l.getSettingsConfig();return e.currentWordLength=this.game.options.word.length.toString(),e.currentTries=this.game.options.tries.toString(),e.currentLang=this.game.options.lang,e}async setLang(e){const o=new w(this.game.options.word.length,this.game.options.tries,e);await this.updateGameConfig(o)}async setTries(e){const o=new w(this.game.options.word.length,e,this.game.options.lang);await this.updateGameConfig(o)}async setWordLength(e){const o=new w(e,this.game.options.tries,this.game.options.lang);await this.updateGameConfig(o)}displayToast(e,o=2500){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this.showToast=!0,this.toastMessage=e,this.toastTimeoutInMs=o,this.showToast&&(this.timer=setTimeout(()=>this.hideToast(),o))}hideToast(){this.showToast=!1}setKeyLocationKnown(e){!this.keyboard||(this.keyboard[e].usedLocationKnown=!0)}setKeyLocationUnknown(e){!this.keyboard||(this.keyboard[e].usedLocationUnknown=!0)}setKeyNotUsed(e){!this.keyboard||(this.keyboard[e].notUsed=!0)}async updateGameConfig(e){const o=await y.createGameService(e);this.game=o,this.updateGuessesState()}updateGuessesState(){this.guesses=this.game.guesses.flat()}updateKeyboardState(){this.keyboard={...this.keyboard}}}const g=i.exports.createContext(null),J=t=>{const[e,o]=i.exports.useState(null),[s,n]=i.exports.useState(null);return i.exports.useEffect(()=>{s||(async()=>{try{const a=await y.createGameService(),c=await l.generateKeyboard(a.options.lang);n(new Y(a,c))}catch(a){o(a)}})()},[]),e?(l.removeLoadingIndicator(),r("div",{className:"flex justify-center items-center m-10",children:r(M,{message:e.message})})):s?(l.removeLoadingIndicator(),r(g.Provider,{value:s,children:t.children})):r(u,{})},Q=m(()=>{const t=i.exports.useContext(g);return t?r("div",{className:`gameboard grid-cols-${t.getWordLength()}`,children:[...Array(t.getWordLength()*t.getTotalTries())].map((e,o)=>{const s=t.getGuessByIndex(o);return r(D,{character:s.character,usedLocationCorrect:s.usedLocationCorrect,usedLocationIncorrect:s.usedLocationIncorrect,notUsed:s.notUsed,invalid:s.invalid},o)})}):r(u,{})});class X{static sourceCodeUrl="https://github.com/ncpleslie/wordle-clone"}var f;(function(t){t.Root="/wordle-clone/",t.Settings="/wordle-clone/settings"})(f||(f={}));const Z=()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px",children:r("path",{d:"M10.9,2.1c-4.6,0.5-8.3,4.2-8.8,8.7c-0.5,4.7,2.2,8.9,6.3,10.5C8.7,21.4,9,21.2,9,20.8v-1.6c0,0-0.4,0.1-0.9,0.1 c-1.4,0-2-1.2-2.1-1.9c-0.1-0.4-0.3-0.7-0.6-1C5.1,16.3,5,16.3,5,16.2C5,16,5.3,16,5.4,16c0.6,0,1.1,0.7,1.3,1c0.5,0.8,1.1,1,1.4,1 c0.4,0,0.7-0.1,0.9-0.2c0.1-0.7,0.4-1.4,1-1.8c-2.3-0.5-4-1.8-4-4c0-1.1,0.5-2.2,1.2-3C7.1,8.8,7,8.3,7,7.6C7,7.2,7,6.6,7.3,6 c0,0,1.4,0,2.8,1.3C10.6,7.1,11.3,7,12,7s1.4,0.1,2,0.3C15.3,6,16.8,6,16.8,6C17,6.6,17,7.2,17,7.6c0,0.8-0.1,1.2-0.2,1.4 c0.7,0.8,1.2,1.8,1.2,3c0,2.2-1.7,3.5-4,4c0.6,0.5,1,1.4,1,2.3v2.6c0,0.3,0.3,0.6,0.7,0.5c3.7-1.5,6.3-5.1,6.3-9.3 C22,6.1,16.9,1.4,10.9,2.1z"})}),H=()=>{const t=S();return d("nav",{className:"border text-center p-1 shadow grid grid-cols-4",children:[r(R,{className:"col-start-1",to:f.Settings,state:{background:t},children:"Settings"}),r("h1",{className:"font-bold col-start-2 col-span-2",children:"Another Wordle Clone"}),r("a",{href:X.sourceCodeUrl,className:"col-start-4 ml-auto",children:r(Z,{})})]})};const ee=i.exports.memo(t=>{const e=()=>{t.onKeyClicked(t.character)},o=k("key",{"used-and-unknown":t.usedLocationUnknown,"used-and-known":t.usedLocationKnown,"not-used":t.notUsed,special:t.special});return r("button",{className:o,onClick:e,children:r("p",{className:"key__text",children:t.character.toUpperCase()})})});const te=m(()=>{const t=i.exports.useContext(g);if(!t)return r(u,{});const e=i.exports.useCallback(async s=>{await t.onKeyClicked(s)},[t.onKeyClicked]);let o=0;return r("div",{children:r("div",{className:"keyboard",children:Object.keys(t.keyboard).map(s=>{const n=r(ee,{character:s,usedLocationKnown:t.keyboard[s].usedLocationKnown,usedLocationUnknown:t.keyboard[s].usedLocationUnknown,onKeyClicked:e,notUsed:t.keyboard[s].notUsed,special:t.keyboard[s].special},s);return t.keyboard[s].row!==o?(o=t.keyboard[s].row,d(i.exports.Fragment,{children:[r("div",{className:"keyboard__break"}),n]},s)):n})})})});const se=m(()=>{const t=i.exports.useContext(g);if(!t)return r(u,{});const e=i.exports.useRef(null),o=r(O,{in:t.showToast,timeout:t.toastTimeoutInMs,classNames:"slide",mountOnEnter:!0,unmountOnExit:!0,nodeRef:e,children:r("div",{ref:e,className:"toast",children:r("div",{className:"toast-content",children:r("p",{children:t.toastMessage})})})});return r(u,{children:C.exports.createPortal(o,document.getElementById(p.toastElement))})}),oe="_app_q070f_1",ne="_game_q070f_1";var I={app:oe,game:ne};const re=()=>d(u,{children:[d("div",{className:I.app,children:[r(H,{}),d("div",{className:I.game,children:[r(Q,{}),r(te,{})]})]}),r(se,{})]}),ae=()=>Math.floor(100+Math.random()*900),x=t=>{const[e,o]=i.exports.useState(t.defaultValue),s=`dropdown-${ae()}`,n=a=>{const c=a.target.value;o(c),t.onChange(c)};return d("div",{className:"flex flex-row justify-between shadow rounded-lg border border-gray-50",children:[r("label",{className:"w-full p-2",htmlFor:s,children:t.label}),r("select",{disabled:t.values.length<=1,id:s,className:"shadow-xl w-20 p-2 rounded-lg border border-gray-50 cursor-pointer  disabled:shadow disabled:bg-gray-300 disabled:border-gray-300 disabled:cursor-not-allowed",value:e,onChange:n,children:t.values.map(a=>r("option",{value:a,children:a},`${a}-${s}`))})]})},ie=m(t=>{const e=i.exports.useContext(g),o=a=>{e?.setWordLength(parseInt(a))},s=a=>{e?.setTries(parseInt(a))},n=a=>{e?.setLang(a)};return d("div",{className:"w-72 h-52 my-10 mx-10 flex flex-col gap-2",children:[t.settingsConfig.currentWordLength&&r(x,{onChange:o,values:t.settingsConfig.wordLengths,defaultValue:t.settingsConfig.currentWordLength,label:"Word Length"}),r("hr",{className:"border border-gray-300"}),t.settingsConfig.currentTries&&r(x,{onChange:s,values:t.settingsConfig.tries,defaultValue:t.settingsConfig.currentTries,label:"Total Attempts"}),r("hr",{className:"border border-gray-300"}),t.settingsConfig.currentLang&&r(x,{onChange:n,values:t.settingsConfig.languages,defaultValue:t.settingsConfig.currentLang,label:"Language"})]})});var U={"loading-root":"_loading-root_5beql_1","loading-ripple":"_loading-ripple_5beql_7"},ce=()=>r("div",{className:U["loading-root"],children:d("div",{className:U["loading-ripple"],children:[r("div",{}),r("div",{})]})});const de=t=>{const[e,o]=i.exports.useState(!1);return i.exports.useLayoutEffect(()=>{if(e)return;const s=document.createElement("div");s.setAttribute("id",t),document.body.prepend(s),o(!0)}),i.exports.useEffect(()=>()=>{document.getElementById(t)?.remove()},[]),e},le=()=>r("svg",{className:"w-6 h-6 text-black",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:r("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),ue=t=>{const e=A(),o=de(p.modalElement),s=()=>{e(-1)};i.exports.useEffect(()=>(document.body.classList.add("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[]);const n=r("div",{onClick:s,className:"absolute inset-0 bg-black bg-opacity-75 w-full h-screen z-10 flex items-center justify-center",children:r("div",{onClick:a=>{a.stopPropagation()},children:d("div",{className:"bg-gray-200 drop-shadow rounded text-center w-full",children:[d("div",{className:"grid grid-cols-3 items-center p-2",children:[r("h2",{className:"font-bold col-start-2",children:t.title}),r("div",{onClick:s,className:"cursor-pointer  ml-auto",children:r(le,{})})]}),t.children]})})});return o?r(u,{children:C.exports.createPortal(n,document.getElementById(p.modalElement))}):r(u,{})},he=m(()=>{const t=i.exports.useContext(g),[e,o]=i.exports.useState(null),[s,n]=i.exports.useState(!1);return i.exports.useEffect(()=>{(async()=>{n(!0);const a=await t?.getSettings();a&&(o(a),console.log(a)),n(!1)})()},[]),d(ue,{title:"Settings",children:[s&&r("div",{className:"p-4",children:r(ce,{})}),!s&&e&&r(ie,{settingsConfig:e})]})}),ge=()=>{const t=S(),e=t.state&&t.state.background;return d(J,{children:[r(E,{location:e||t,children:r(N,{path:f.Root,element:r(re,{})})}),e&&r(E,{children:r(N,{path:f.Settings,element:r(he,{})})})]})};C.exports.render(r($.StrictMode,{children:r(j,{children:r(ge,{})})}),document.getElementById("root"));
