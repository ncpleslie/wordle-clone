import{j as g,r as h,m as T,o as f,C as x,a as U,R as E,b as _}from"./vendor.aed7bed9.js";const $=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}};$();const S="_app_666x2_1",R="_game_666x2_4";var p={app:S,game:R};const a=g.exports.jsx,m=g.exports.jsxs,b=g.exports.Fragment,G=h.exports.memo(r=>a("div",{className:`character-box 
        ${r.usedLocationIncorrect&&"incorrect-location"} 
          ${r.usedLocationCorrect&&"correct-location"} 
          ${r.notUsed&&"not-used"}
          ${r.invalid&&"invalid"}
          `,children:a("p",{className:"character-box__text",children:r.character})}));var l;(function(r){r.Enter="ENTER",r.Backspace="<"})(l||(l={}));class L{constructor(t){this.character=t}character;usedLocationCorrect=!1;usedLocationIncorrect=!1;notUsed=!1;invalid=!1}class I{constructor(t,e,o){this.word=t.toUpperCase(),this.tries=e,this.lang=o,console.log("Word is: ",t)}word;tries;lang}class u{error;won;static forNotAWord(){return u.createSubmitResponse("Not a word!",!0)}static forLost(t){return u.createSubmitResponse(t,!0)}static forWon(){return u.createSubmitResponse("You win!",!1)}static createSubmitResponse(t,e){const o=new u;return e?o.error=t:o.won="You win!",o}}const O="modulepreload",k={},W="/wordle-clone/",w=function(t,e){return!e||e.length===0?t():Promise.all(e.map(o=>{if(o=`${W}${o}`,o in k)return;k[o]=!0;const s=o.endsWith(".css"),n=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":O,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((K,C)=>{c.addEventListener("load",K),c.addEventListener("error",C)})})).then(()=>t())};class N{constructor(t,e,o){this.wordLength=t,this.tries=e,this.lang=o}wordLength;tries;lang}class A{constructor(t,e,o,s=!1){this.character=t,this.order=e,this.row=o,this.special=s,this.usedLocationKnown=!1,this.usedLocationUnknown=!1,this.notUsed=!1}character;order;row;special;usedLocationKnown;usedLocationUnknown;notUsed}class d{static async generateKeyboard(t){return(await d.getKeyboard(t))?.reduce((o,s)=>(o[s.character.toUpperCase()]=s,o),{})}static async getConfig(){const t=await w(()=>import("./config.639d2aae.js"),[]);return new N(t.wordLength,t.tries,t.lang)}static async getKeyboard(t){return(await w(()=>import("./keyboard.f1bf6d36.js"),[])).default[t].map(s=>new A(s.character,s.order,s.row,s.special))}static async getRandomWord(t,e){const o=await d.getDictionary(e),s=o[t].length,n=o[t][Math.floor(Math.random()*(s-0))];return/^[a-z]+$/i.test(n)?n:d.getRandomWord(t,e)}static async isWord(t,e){return(await d.getDictionary(e))[t.length.toString()].includes(t.toLowerCase())}static async getDictionary(t){return(await w(()=>import("./dictionary.4017dd85.js"),[])).default[t]}}class y{row=0;constructor(t,e){this.options=t,this.guesses=e}guesses;options;addGuess(t){this.guesses[this.row].length>=this.options.word.length||this.guesses[this.row].push(new L(t))}async submit(){const t=this.options.word.length,e=this.guesses[this.row].length;if(e===0||e%t!=0||this.row>=this.options.tries)return;const o=this.guesses[this.row].reduce((s,n)=>`${s}${n.character}`,"");if(!await d.isWord(o,this.options.lang)){for(let s=0;s<e;s++)this.guesses[this.row][s].invalid=!0;return u.forNotAWord()}for(let s=0;s<e;s++){const n=this.guesses[this.row][s].character,c=this.options.word.split("");if(n===c[s]){this.guesses[this.row][s].usedLocationCorrect=!0;continue}if(c.includes(n)){this.guesses[this.row][s].usedLocationIncorrect=!0;continue}this.guesses[this.row][s].notUsed=!0}if(o===this.options.word)return u.forWon();if(this.row++,this.row>=this.options.tries)return u.forLost(this.options.word)}undo(){this.guesses[this.row]?.pop()}static async createGameService(){const t=await d.getConfig(),e=await d.getRandomWord(t.wordLength,t.lang),o=new I(e,t.tries,t.lang),s=[...Array(o.tries)].map(()=>Array(0));return new y(o,s)}}class j{timer;constructor(t,e){T(this),this.guesses=[],this.game=t,this.keyboard=e}game;guesses;keyboard;showToast=!1;toastMessage="";toastTimeoutInMs=2500;getGuessByIndex(t){return this.guesses.length===0||this.guesses.length<=t?new L(""):this.guesses[t]}getTotalTries(){return this.game.options.tries}getWordLength(){return this.game.options.word.length}async onKeyClicked(t){if(t===l.Enter){const e=await this.game.submit();e?.error&&this.displayToast(e.error),e?.won&&this.displayToast(e.won),this.updateGuessesState(),this.guesses.forEach(o=>{o.usedLocationCorrect&&this.setKeyLocationKnown(o.character),o.usedLocationIncorrect&&this.setKeyLocationUnknown(o.character),o.notUsed&&this.setKeyNotUsed(o.character)}),this.updateKeyboardState();return}if(t===l.Backspace){this.game.undo(),this.updateGuessesState();return}this.game.addGuess(t),this.updateGuessesState()}setKeyLocationKnown(t){!this.keyboard||(this.keyboard[t].usedLocationKnown=!0)}setKeyLocationUnknown(t){!this.keyboard||(this.keyboard[t].usedLocationUnknown=!0)}setKeyNotUsed(t){!this.keyboard||(this.keyboard[t].notUsed=!0)}displayToast(t,e=2500){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this.showToast=!0,this.toastMessage=t,this.toastTimeoutInMs=e,this.showToast&&(this.timer=setTimeout(()=>this.hideToast(),e))}hideToast(){this.showToast=!1}updateGuessesState(){this.guesses=this.game.guesses.flat()}updateKeyboardState(){this.keyboard={...this.keyboard}}}const v=await y.createGameService(),D=await d.generateKeyboard(v.options.lang),i=new j(v,D),M=f(()=>a("div",{className:`gameboard grid-cols-${i.getWordLength()}`,children:[...Array(i.getWordLength()*i.getTotalTries())].map((r,t)=>{const e=i.getGuessByIndex(t);return a(G,{character:e.character,usedLocationCorrect:e.usedLocationCorrect,usedLocationIncorrect:e.usedLocationIncorrect,notUsed:e.notUsed,invalid:e.invalid},t)})}));const P=h.exports.memo(r=>{const t=()=>{r.onKeyClicked(r.character)};return a("button",{className:`key ${r.usedLocationUnknown&&"used-and-unknown"} ${r.usedLocationKnown&&"used-and-known"} ${r.notUsed&&"not-used"} ${r.special&&"special"}`,onClick:t,children:a("p",{className:"key__text",children:r.character.toUpperCase()})})});const B=f(()=>{const r=h.exports.useCallback(async e=>{await i.onKeyClicked(e)},[i.onKeyClicked]);let t=0;return a("div",{children:a("div",{className:"keyboard",children:Object.keys(i.keyboard).map(e=>{const o=a(P,{character:e,usedLocationKnown:i.keyboard[e].usedLocationKnown,usedLocationUnknown:i.keyboard[e].usedLocationUnknown,onKeyClicked:r,notUsed:i.keyboard[e].notUsed,special:i.keyboard[e].special},e);return i.keyboard[e].row!==t?(t=i.keyboard[e].row,m(h.exports.Fragment,{children:[a("div",{className:"keyboard__break"}),o]},e)):o})})})});class F{static toastElement="toast-root"}const V=f(()=>{const r=h.exports.useRef(),t=a(x,{in:i.showToast,timeout:i.toastTimeoutInMs,classNames:"slide",mountOnEnter:!0,unmountOnExit:!0,nodeRef:r,children:a("div",{ref:r,className:"toast",children:a("div",{className:"toast-content",children:a("p",{children:i.toastMessage})})})});return a(b,{children:U.exports.createPortal(t,document.getElementById(F.toastElement))})}),q=()=>m(b,{children:[a("div",{className:p.app,children:m("div",{className:p.game,children:[a(M,{}),a(B,{})]})}),a(V,{})]});E.render(a(_.StrictMode,{children:a(q,{})}),document.getElementById("root"));
