import{j as L,r as c,c as v,m as N,o as b,a as C,C as R,u as x,L as W,R as k,b as S,d as A,B as O}from"./vendor.85ee4ff0.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}};j();const P="modulepreload",E={},$="/wordle-clone/",m=function(e,t){return!t||t.length===0?e():Promise.all(t.map(s=>{if(s=`${$}${s}`,s in E)return;E[s]=!0;const r=s.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":P,r||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),r)return new Promise((I,U)=>{i.addEventListener("load",I),i.addEventListener("error",U)})})).then(()=>e())};const n=L.exports.jsx,l=L.exports.jsxs,h=L.exports.Fragment,B=c.exports.memo(o=>{const e=v("character-box",{"incorrect-location":o.usedLocationIncorrect,"correct-location":o.usedLocationCorrect,"not-used":o.notUsed,invalid:o.invalid});return n("div",{className:e,children:n("p",{className:"character-box__text",children:o.character})})}),D=({message:o})=>l("div",{className:"max-w-sm rounded overflow-hidden shadow-lg px-6 py-4 text-center bg-red-100 border border-red-400",children:[n("h1",{className:"font-bold text-xl mb-2",children:"An error has occurred while loading this application"}),o&&l("p",{children:["Reason: ",o]})]});class M{constructor(e,t,s){this.word=e.toUpperCase(),this.tries=t,this.lang=s,console.log("Word is: ",e)}word;tries;lang}class K{constructor(e){this.character=e}character;usedLocationCorrect=!1;usedLocationIncorrect=!1;notUsed=!1;invalid=!1}class u{error;won;static forNotAWord(){return u.createSubmitResponse("Not a word!",!0)}static forLost(e){return u.createSubmitResponse(e,!0)}static forWon(){return u.createSubmitResponse("You win!",!1)}static createSubmitResponse(e,t){const s=new u;return t?s.error=e:s.won="You win!",s}}class f{constructor(e,t,s,r){this.wordLength=e,this.tries=t,this.lang=s,this.supportedLangs=r}wordLength;tries;supportedLangs;lang}class q{constructor(e,t,s,r=!1){this.character=e,this.order=t,this.row=s,this.special=r,this.usedLocationKnown=!1,this.usedLocationUnknown=!1,this.notUsed=!1}character;order;row;special;usedLocationKnown;usedLocationUnknown;notUsed}class T{static loadingElement="loading-root";static modalElement="modal-root";static toastElement="toast-root"}class F{constructor(e,t,s,r,a,i){this.wordLengths=e,this.tries=t,this.languages=s,this.currentWordLength=r,this.currentTries=a,this.currentLang=i}languages;currentLang;currentWordLength;wordLengths;tries;currentTries}class d{static async generateKeyboard(e){return(await d.getKeyboard(e))?.reduce((s,r)=>(s[r.character.toUpperCase()]=r,s),{})}static async getConfig(){const e=await m(()=>import("./config.81b6a2f7.js"),[]);return new f(e.wordLength,e.tries,e.supportedLangs[0],e.supportedLangs)}static async getKeyboard(e){return(await m(()=>import("./keyboard.f1bf6d36.js"),[])).default[e].map(r=>new q(r.character,r.order,r.row,r.special))}static async getRandomWord(e,t){const s=await d.getDictionary(t),r=s[e].length,a=s[e][Math.floor(Math.random()*(r-0))];return/^[a-z]+$/i.test(a)?a:d.getRandomWord(e,t)}static async getSettingsConfig(){const e=await d.getConfig();if(!e.lang)throw new Error("Unable to determine language");const t=await d.getDictionary(e.lang),s=["1","2","3","4","5","6","7","8","9","10"],r=e.supportedLangs?e.supportedLangs:[e.lang];return new F(Object.keys(t),s,r)}static async isWord(e,t){return(await d.getDictionary(t))[e.length.toString()].includes(e.toLowerCase())}static removeLoadingIndicator(){document.getElementById(T.loadingElement)?.remove()}static async getDictionary(e){return(await m(()=>import("./dictionary.4017dd85.js"),[])).default[e]}}class p{row=0;constructor(e,t){this.options=e,this.guesses=t}guesses;options;addGuess(e){this.guesses[this.row].length>=this.options.word.length||this.guesses[this.row].push(new K(e))}async submit(){const e=this.options.word.length,t=this.guesses[this.row].length;if(t===0||t%e!=0||this.row>=this.options.tries)return;const s=this.guesses[this.row].reduce((r,a)=>`${r}${a.character}`,"");if(!await d.isWord(s,this.options.lang)){for(let r=0;r<t;r++)this.guesses[this.row][r].invalid=!0;return u.forNotAWord()}for(let r=0;r<t;r++){const a=this.guesses[this.row][r].character,i=this.options.word.split("");if(a===i[r]){this.guesses[this.row][r].usedLocationCorrect=!0;continue}if(i.includes(a)){this.guesses[this.row][r].usedLocationIncorrect=!0;continue}this.guesses[this.row][r].notUsed=!0}if(s===this.options.word)return u.forWon();if(this.row++,this.row>=this.options.tries)return u.forLost(this.options.word)}undo(){this.guesses[this.row]?.pop()}static async createGameService(e){let t=e;e||(t=await d.getConfig());const s=await d.getRandomWord(t?.wordLength||5,t?.lang||"en-US"),r=new M(s,t?.tries||6,t?.lang||"en-US"),a=[...Array(r.tries)].map(()=>Array(0));return new p(r,a)}}var w;(function(o){o.Enter="ENTER",o.Backspace="<"})(w||(w={}));class V{timer;constructor(e,t){N(this),this.guesses=[],this.game=e,this.keyboard=t}game;guesses;keyboard;showToast=!1;toastMessage="";toastTimeoutInMs=2500;getGuessByIndex(e){return this.guesses.length===0||this.guesses.length<=e?new K(""):this.guesses[e]}getTotalTries(){return this.game.options.tries}getWordLength(){return this.game.options.word.length}async onKeyClicked(e){if(e===w.Enter){const t=await this.game.submit();t?.error&&this.displayToast(t.error),t?.won&&this.displayToast(t.won),this.updateGuessesState(),this.guesses.forEach(s=>{s.usedLocationCorrect&&this.setKeyLocationKnown(s.character),s.usedLocationIncorrect&&this.setKeyLocationUnknown(s.character),s.notUsed&&this.setKeyNotUsed(s.character)}),this.updateKeyboardState();return}if(e===w.Backspace){this.game.undo(),this.updateGuessesState();return}this.game.addGuess(e),this.updateGuessesState()}async getSettings(){const e=await d.getSettingsConfig();return e.currentWordLength=this.game.options.word.length.toString(),e.currentTries=this.game.options.tries.toString(),e.currentLang=this.game.options.lang,e}async setLang(e){const t=new f(this.game.options.word.length,this.game.options.tries,e);await this.updateGameConfig(t)}async setTries(e){const t=new f(this.game.options.word.length,e,this.game.options.lang);await this.updateGameConfig(t)}async setWordLength(e){const t=new f(e,this.game.options.tries,this.game.options.lang);await this.updateGameConfig(t)}displayToast(e,t=2500){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this.showToast=!0,this.toastMessage=e,this.toastTimeoutInMs=t,this.showToast&&(this.timer=setTimeout(()=>this.hideToast(),t))}hideToast(){this.showToast=!1}setKeyLocationKnown(e){!this.keyboard||(this.keyboard[e].usedLocationKnown=!0)}setKeyLocationUnknown(e){!this.keyboard||(this.keyboard[e].usedLocationUnknown=!0)}setKeyNotUsed(e){!this.keyboard||(this.keyboard[e].notUsed=!0)}async updateGameConfig(e){const t=await p.createGameService(e);this.game=t,this.updateGuessesState()}updateGuessesState(){this.guesses=this.game.guesses.flat()}updateKeyboardState(){this.keyboard={...this.keyboard}}}const y=c.exports.createContext(null),z=o=>{const[e,t]=c.exports.useState(null),[s,r]=c.exports.useState(null);return c.exports.useEffect(()=>{s||(async()=>{try{const a=await p.createGameService(),i=await d.generateKeyboard(a.options.lang);r(new V(a,i))}catch(a){t(a)}})()},[]),e?(d.removeLoadingIndicator(),n("div",{className:"flex justify-center items-center m-10",children:n(D,{message:e.message})})):s?(d.removeLoadingIndicator(),n(y.Provider,{value:s,children:o.children})):n(h,{})},Y=b(()=>{const o=c.exports.useContext(y);return o?n("div",{className:`gameboard grid-cols-${o.getWordLength()}`,children:[...Array(o.getWordLength()*o.getTotalTries())].map((e,t)=>{const s=o.getGuessByIndex(t);return n(B,{character:s.character,usedLocationCorrect:s.usedLocationCorrect,usedLocationIncorrect:s.usedLocationIncorrect,notUsed:s.notUsed,invalid:s.invalid},t)})}):n(h,{})});const J=c.exports.memo(o=>{const e=()=>{o.onKeyClicked(o.character)},t=v("key",{"used-and-unknown":o.usedLocationUnknown,"used-and-known":o.usedLocationKnown,"not-used":o.notUsed,special:o.special});return n("button",{className:t,onClick:e,children:n("p",{className:"key__text",children:o.character.toUpperCase()})})});const Q=b(()=>{const o=c.exports.useContext(y);if(!o)return n(h,{});const e=c.exports.useCallback(async s=>{await o.onKeyClicked(s)},[o.onKeyClicked]);let t=0;return n("div",{children:n("div",{className:"keyboard",children:Object.keys(o.keyboard).map(s=>{const r=n(J,{character:s,usedLocationKnown:o.keyboard[s].usedLocationKnown,usedLocationUnknown:o.keyboard[s].usedLocationUnknown,onKeyClicked:e,notUsed:o.keyboard[s].notUsed,special:o.keyboard[s].special},s);return o.keyboard[s].row!==t?(t=o.keyboard[s].row,l(c.exports.Fragment,{children:[n("div",{className:"keyboard__break"}),r]},s)):r})})})});const X=o=>{const[e,t]=c.exports.useState(!1);return c.exports.useLayoutEffect(()=>{if(e)return;const s=document.createElement("div");s.setAttribute("id",o),document.body.prepend(s),t(!0)}),c.exports.useEffect(()=>()=>{document.getElementById(o)?.remove()},[]),e},Z=({children:o,id:e,force:t})=>t&&(console.log("ff"),!X(e))?n(h,{}):n(h,{children:C.exports.createPortal(o,document.getElementById(e))}),H=b(()=>{const o=c.exports.useContext(y);if(!o)return n(h,{});const e=c.exports.useRef(null),t=n(R,{in:o.showToast,timeout:o.toastTimeoutInMs,classNames:"slide",mountOnEnter:!0,unmountOnExit:!0,nodeRef:e,children:n("div",{ref:e,className:"toast",children:n("div",{className:"toast-content",children:n("p",{children:o.toastMessage})})})});return n(Z,{id:T.toastElement,force:!0,children:t})}),ee="_app_q070f_1",te="_game_q070f_1";var _={app:ee,game:te};const se=()=>l(h,{children:[n("div",{className:_.app,children:l("div",{className:_.game,children:[n(Y,{}),n(Q,{})]})}),n(H,{})]});var g;(function(o){o.Root="/wordle-clone/",o.Settings="/wordle-clone/settings"})(g||(g={}));var G={"loading-root":"_loading-root_5beql_1","loading-ripple":"_loading-ripple_5beql_7"},oe=()=>n("div",{className:G["loading-root"],children:l("div",{className:G["loading-ripple"],children:[n("div",{}),n("div",{})]})});class re{static sourceCodeUrl="https://github.com/ncpleslie/wordle-clone"}const ne=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px",children:n("path",{d:"M10.9,2.1c-4.6,0.5-8.3,4.2-8.8,8.7c-0.5,4.7,2.2,8.9,6.3,10.5C8.7,21.4,9,21.2,9,20.8v-1.6c0,0-0.4,0.1-0.9,0.1 c-1.4,0-2-1.2-2.1-1.9c-0.1-0.4-0.3-0.7-0.6-1C5.1,16.3,5,16.3,5,16.2C5,16,5.3,16,5.4,16c0.6,0,1.1,0.7,1.3,1c0.5,0.8,1.1,1,1.4,1 c0.4,0,0.7-0.1,0.9-0.2c0.1-0.7,0.4-1.4,1-1.8c-2.3-0.5-4-1.8-4-4c0-1.1,0.5-2.2,1.2-3C7.1,8.8,7,8.3,7,7.6C7,7.2,7,6.6,7.3,6 c0,0,1.4,0,2.8,1.3C10.6,7.1,11.3,7,12,7s1.4,0.1,2,0.3C15.3,6,16.8,6,16.8,6C17,6.6,17,7.2,17,7.6c0,0.8-0.1,1.2-0.2,1.4 c0.7,0.8,1.2,1.8,1.2,3c0,2.2-1.7,3.5-4,4c0.6,0.5,1,1.4,1,2.3v2.6c0,0.3,0.3,0.6,0.7,0.5c3.7-1.5,6.3-5.1,6.3-9.3 C22,6.1,16.9,1.4,10.9,2.1z"})}),ae=()=>{const o=x();return l("nav",{className:"border text-center p-1 shadow grid grid-cols-4",children:[n(W,{className:"col-start-1",to:g.Settings,state:{background:o},children:"Settings"}),n("h1",{className:"font-bold col-start-2 col-span-2",children:"Another Wordle Clone"}),n("a",{href:re.sourceCodeUrl,className:"col-start-4 ml-auto",children:n(ne,{})})]})},ie=c.exports.lazy(()=>m(()=>import("./Settings.2e8b424d.js"),["assets/Settings.2e8b424d.js","assets/vendor.85ee4ff0.js"])),ce=()=>{const o=x(),e=o.state&&o.state.background;return l(z,{children:[n(ae,{}),l(c.exports.Suspense,{fallback:n(oe,{}),children:[n(k,{location:e||o,children:n(S,{path:g.Root,element:n(se,{})})}),e&&n(k,{children:n(S,{path:g.Settings,element:n(ie,{})})})]})]})};C.exports.render(n(A.StrictMode,{children:n(O,{children:n(ce,{})})}),document.getElementById("root"));export{T as D,y as G,oe as L,Z as P,n as a,l as j};
