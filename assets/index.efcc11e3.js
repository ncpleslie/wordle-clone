import{j as g,m as C,o as f,r as U,a as _,R as x,b as $}from"./vendor.adc0ab1d.js";const E=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}};E();const S="_app_666x2_1",M="_game_666x2_4";var p={app:S,game:M};const n=g.exports.jsx,y=g.exports.jsxs,l=g.exports.Fragment,G=r=>n("div",{className:`character-box 
        ${r.usedLocationIncorrect&&"incorrect-location"} 
          ${r.usedLocationCorrect&&"correct-location"} 
          ${r.notUsed&&"not-used"}
          ${r.invalid&&"invalid"}
          `,children:n("p",{className:"character-box__text",children:r.character})});var h;(function(r){r.Enter="ENTER",r.Backspace="<"})(h||(h={}));class b{constructor(e){this.character=e}character;usedLocationCorrect=!1;usedLocationIncorrect=!1;notUsed=!1;invalid=!1}class I{constructor(e,t,o){this.word=e.toUpperCase(),this.tries=t,this.lang=o,console.log("Word is: ",e)}word;tries;lang}class d{error;won;static forNotAWord(){return d.createSubmitResponse("Not a word!",!0)}static forLost(e){return d.createSubmitResponse(e,!0)}static forWon(){return d.createSubmitResponse("You win!",!1)}static createSubmitResponse(e,t){const o=new d;return t?o.error=e:o.won="You win!",o}}const O="modulepreload",L={},R="/wordle-clone/",w=function(e,t){return!t||t.length===0?e():Promise.all(t.map(o=>{if(o=`${R}${o}`,o in L)return;L[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":O,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((v,K)=>{c.addEventListener("load",v),c.addEventListener("error",K)})})).then(()=>e())};class W{constructor(e,t,o){this.wordLength=e,this.tries=t,this.lang=o}wordLength;tries;lang}class N{constructor(e,t,o,s=!1){this.character=e,this.order=t,this.row=o,this.special=s,this.usedLocationKnown=!1,this.usedLocationUnknown=!1,this.notUsed=!1}character;order;row;special;usedLocationKnown;usedLocationUnknown;notUsed}class u{static async generateKeyboard(e){return(await u.getKeyboard(e))?.reduce((o,s)=>(o[s.character.toUpperCase()]=s,o),{})}static async getConfig(){const e=await w(()=>import("./config.639d2aae.js"),[]);return new W(e.wordLength,e.tries,e.lang)}static async getKeyboard(e){return(await w(()=>import("./keyboard.f1bf6d36.js"),[])).default[e].map(s=>new N(s.character,s.order,s.row,s.special))}static async getRandomWord(e,t){const o=await u.getDictionary(t),s=o[e].length;return o[e][Math.floor(Math.random()*(s-0))]}static async isWord(e,t){return(await u.getDictionary(t))[e.length.toString()].includes(e.toLowerCase())}static async getDictionary(e){return(await w(()=>import("./dictionary.4017dd85.js"),[])).default[e]}}class m{row=0;constructor(e,t){this.options=e,this.guesses=t}guesses;options;addGuess(e){this.guesses[this.row].length>=this.options.word.length||this.guesses[this.row].push(new b(e))}async submit(){const e=this.options.word.length,t=this.guesses[this.row].length;if(t===0||t%e!=0||this.row>=this.options.tries)return;const o=this.guesses[this.row].reduce((s,a)=>`${s}${a.character}`,"");if(!await u.isWord(o,this.options.lang)){for(let s=0;s<t;s++)this.guesses[this.row][s].invalid=!0;return d.forNotAWord()}for(let s=0;s<t;s++){const a=this.guesses[this.row][s].character,c=this.options.word.split("");if(a===c[s]){this.guesses[this.row][s].usedLocationCorrect=!0;continue}if(c.includes(a)){this.guesses[this.row][s].usedLocationIncorrect=!0;continue}this.guesses[this.row][s].notUsed=!0}if(o===this.options.word)return d.forWon();if(this.row++,this.row>=this.options.tries)return d.forLost(this.options.word)}undo(){this.guesses[this.row]?.pop()}static async createGameService(){const e=await u.getConfig(),t=await u.getRandomWord(e.wordLength,e.lang),o=new I(t,e.tries,e.lang),s=[...Array(o.tries)].map(()=>Array(0));return new m(o,s)}}class A{constructor(e,t){C(this),this.guesses=[],this.game=e,this.keyboard=t}game;guesses;keyboard;modalMessage="";showModal=!1;getGuessByIndex(e){return this.guesses.length===0||this.guesses.length<=e?new b(""):this.guesses[e]}getTotalTries(){return this.game.options.tries}getWordLength(){return this.game.options.word.length}async onKeyClicked(e){if(e===h.Enter){const t=await this.game.submit();t?.error&&this.displayModal(t.error),t?.won&&this.displayModal(t.won),this.updateGuessesState(),this.guesses.forEach(o=>{o.usedLocationCorrect&&this.setKeyLocationKnown(o.character),o.usedLocationIncorrect&&this.setKeyLocationUnknown(o.character),o.notUsed&&this.setKeyNotUsed(o.character)}),this.updateKeyboardState();return}if(e===h.Backspace){this.game.undo(),this.updateGuessesState();return}this.game.addGuess(e),this.updateGuessesState()}setKeyLocationKnown(e){!this.keyboard||(this.keyboard[e].usedLocationKnown=!0)}setKeyLocationUnknown(e){!this.keyboard||(this.keyboard[e].usedLocationUnknown=!0)}setKeyNotUsed(e){!this.keyboard||(this.keyboard[e].notUsed=!0)}displayModal(e,t=8e3){this.showModal=!0,this.modalMessage=e,this.showModal&&setTimeout(()=>this.showModal=!1,t)}updateGuessesState(){this.guesses=this.game.guesses.flat()}updateKeyboardState(){this.keyboard={...this.keyboard}}}const k=await m.createGameService(),j=await u.generateKeyboard(k.options.lang),i=new A(k,j),D=f(()=>n("div",{className:`gameboard grid-cols-${i.getWordLength()}`,children:[...Array(i.getWordLength()*i.getTotalTries())].map((r,e)=>{const t=i.getGuessByIndex(e);return n(G,{character:t.character,usedLocationCorrect:t.usedLocationCorrect,usedLocationIncorrect:t.usedLocationIncorrect,notUsed:t.notUsed,invalid:t.invalid},e)})}));const P=r=>{const e=()=>{r.onKeyClicked(r.character)};return n("button",{className:`key ${r.usedLocationUnknown&&"used-and-unknown"} ${r.usedLocationKnown&&"used-and-known"} ${r.notUsed&&"not-used"} ${r.special&&"special"}`,onClick:e,children:n("p",{className:"key__text",children:r.character.toUpperCase()})})};const T=f(()=>{const r=async t=>{await i.onKeyClicked(t)};let e=0;return i.keyboard?n("div",{children:n("div",{className:"keyboard",children:Object.keys(i.keyboard).map(t=>{const o=n(P,{character:t,usedLocationKnown:i.keyboard[t].usedLocationKnown,usedLocationUnknown:i.keyboard[t].usedLocationUnknown,onKeyClicked:r,notUsed:i.keyboard[t].notUsed,special:i.keyboard[t].special},t);return i.keyboard[t].row!==e?(e=i.keyboard[t].row,y(U.exports.Fragment,{children:[n("div",{className:"keyboard__break"}),o]},t)):o})})}):n(l,{})});class B{static modalElement="modal-root"}const F=f(()=>{const r=n("div",{className:"modal",children:n("div",{className:"modal-content",children:n("p",{children:i.modalMessage})})});return i.showModal?n(l,{children:_.exports.createPortal(r,document.getElementById(B.modalElement))}):n(l,{})}),V=()=>y(l,{children:[n("div",{className:p.app,children:y("div",{className:p.game,children:[n(D,{}),n(T,{})]})}),n(F,{})]});x.render(n($.StrictMode,{children:n(V,{})}),document.getElementById("root"));
